{"version":3,"sources":["serviceWorker.js","components/hooks/useGoogleMap.js","components/hooks/useGeocoder.js","components/hooks/usePlacesService.js","components/hooks/useAutocomplete.js","components/search-bar/SearchBar.jsx","components/listings/Listing.jsx","components/listings/Listings.jsx","components/App.js","index.js"],"names":["Boolean","window","location","hostname","match","useGoogleMap","mapRef","mapOptions","_useState","useState","_useState2","Object","slicedToArray","map","setMap","_useState3","_useState4","locations","setLocations","_useState5","_useState6","markers","setMarkers","_useState7","_useState8","hoveredIdx","setHoveredIdx","useEffect","google","maps","Map","current","forEach","marker","newMarkers","idx","Marker","position","label","String","setAnimation","Animation","BOUNCE","useGeocoder","geocoderReady","setGeocoderReady","geocoder","setGeocoder","statusCodes","OK","Geocoder","place","Promise","resolve","reject","geocode","address","res","status","_res$0$geometry$locat","geometry","lat","lng","usePlacesService","placesServiceReady","setPlacesServiceReady","placesService","setPlacesService","places","PlacesService","query","coords","request","radius","textSearch","useAutocomplete","initialState","inputRef","setPlace","autocomplete","Autocomplete","types","listener","addListener","getPlace","formatted_address","event","clearInstanceListeners","removeListener","document","querySelector","remove","SearchBar","_ref","handleSearch","useRef","setQuery","_useAutoComplete","useAutoComplete","_useAutoComplete2","placeHolder","setPlaceHolder","search","preventDefault","react_default","a","createElement","className","onSubmit","href","type","value","placeholder","onKeyPress","charCode","onChange","target","ref","Listing","open","street","photoUrl","handleHover","cost","price_level","opening_hours","photos","name","rating","user_ratings_total","i","open_now","split","getUrl","maxWidth","maxHeight","onMouseEnter","onMouseLeave","src","alt","concat","Listings","listings","listings_Listing","key","center","zoom","scrollwheel","mapTypeControl","zoomControl","zoomControlOptions","ControlPosition","LEFT_TOP","scaleControl","streetViewControl","App","_useGoogleMap","_useGoogleMap2","_useGeocoder","_useGeocoder2","getCoordsOfAddress","_usePlacesService","_usePlacesService2","getLocationData","setListings","asyncToGenerator","regenerator_default","mark","_callee","data","wrap","_context","prev","next","console","log","sent","panTo","listing","t0","stop","_x","_x2","apply","this","arguments","search_bar_SearchBar","listings_Listings","ReactDOM","render","components_App","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.e7b013a5.chunk.js","sourcesContent":["// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import { useState, useEffect } from 'react';\n\n/* global google */\n\nfunction useGoogleMap(mapRef, mapOptions) {\n  const [map, setMap] = useState(null);\n  const [locations, setLocations] = useState([]);\n  const [markers, setMarkers] = useState([]);\n  const [hoveredIdx, setHoveredIdx] = useState(null);\n\n  useEffect(() => {\n    if (!mapRef) {\n      return;\n    }\n\n    const map = new google.maps.Map(mapRef.current, mapOptions);\n\n    setMap(map);\n  }, [mapRef, mapOptions]);\n\n  useEffect(() => {\n    markers.forEach(marker => marker.setMap(null));\n\n    const newMarkers = locations.map((location, idx) => {\n      return new google.maps.Marker({\n        position: location,\n        label: String(idx + 1),\n        map\n      });\n    });\n\n    setMarkers(newMarkers);\n  }, [locations]);\n\n  useEffect(() => {\n    markers.forEach((marker, idx) => {\n      hoveredIdx === idx\n        ? marker.setAnimation(google.maps.Animation.BOUNCE)\n        : marker.setAnimation(null);\n    });\n  }, [hoveredIdx]);\n\n  return [map, setLocations, setHoveredIdx];\n}\n\nexport default useGoogleMap;\n","import { useState, useEffect } from 'react';\n\n/* global google */\n\nfunction useGeocoder(map) {\n  const [geocoderReady, setGeocoderReady] = useState(false);\n  const [geocoder, setGeocoder] = useState(null);\n  const statusCodes = { OK: 'OK' };\n\n  useEffect(() => {\n    setGeocoderReady(false);\n\n    if (!map) {\n      return;\n    }\n\n    setGeocoder(new google.maps.Geocoder());\n    setGeocoderReady(true);\n  }, [map]);\n\n  function getCoordsOfAddress(place) {\n    return new Promise((resolve, reject) => {\n      geocoder.geocode({ address: place }, (res, status) => {\n        if (status === statusCodes.OK) {\n          const { lat, lng } = res[0].geometry.location;\n\n          resolve({ lat: lat(), lng: lng() });\n        } else {\n          reject(status);\n        }\n      });\n    });\n  }\n\n  return [geocoderReady, getCoordsOfAddress];\n}\n\nexport default useGeocoder;\n","import { useState, useEffect } from 'react';\n\n/* global google */\n\nfunction usePlacesService(map) {\n  const [placesServiceReady, setPlacesServiceReady] = useState(false);\n  const [placesService, setPlacesService] = useState(null);\n  const statusCodes = { OK: 'OK' };\n\n  useEffect(() => {\n    setPlacesServiceReady(false);\n\n    if (!map) {\n      return;\n    }\n\n    setPlacesService(new google.maps.places.PlacesService(map));\n    setPlacesServiceReady(true);\n  }, [map]);\n\n  function getLocationData(query, coords) {\n    return new Promise((resolve, reject) => {\n      const request = {\n        location: coords,\n        radius: '500',\n        query\n      };\n\n      placesService.textSearch(request, (res, status) => {\n        if (status === statusCodes.OK) {\n          resolve(res);\n        } else {\n          reject(status);\n        }\n      });\n    });\n  }\n\n  return [placesServiceReady, getLocationData];\n}\n\nexport default usePlacesService;\n","import { useState, useEffect } from 'react';\n\n/* global google */\n\nfunction useAutocomplete(initialState, inputRef) {\n  const [place, setPlace] = useState(initialState);\n\n  useEffect(() => {\n    if (!inputRef) {\n      return;\n    }\n\n    const autocomplete = new google.maps.places.Autocomplete(inputRef.current, {\n      types: ['(cities)']\n    });\n\n    const listener = autocomplete.addListener('place_changed', () => {\n      const address = autocomplete.getPlace().formatted_address;\n\n      if (address) {\n        setPlace(address);\n      }\n    });\n\n    return () => {\n      google.maps.event.clearInstanceListeners(autocomplete);\n      google.maps.event.removeListener(listener);\n      document.querySelector('.pac-container').remove();\n    };\n  }, [inputRef]);\n\n  return [place, setPlace];\n}\n\nexport default useAutocomplete;\n","import React, { useState, useRef } from 'react';\n\nimport useAutoComplete from '../hooks/useAutocomplete';\n\nimport './SearchBar.sass';\n\nfunction SearchBar({ handleSearch }) {\n  const inputRef = useRef(null);\n  const [query, setQuery] = useState('');\n  const [place, setPlace] = useAutoComplete('', inputRef);\n  const [placeHolder, setPlaceHolder] = useState('location');\n\n  const search = event => {\n    event.preventDefault();\n\n    if (place === '') {\n      setPlaceHolder('Please enter a location');\n      return;\n    }\n\n    handleSearch(query, place);\n  };\n\n  const handleQueryInput = event => {\n    if (event.charCode === 13) {\n      search();\n    }\n  };\n\n  const handleQueryChange = event => {\n    setQuery(event.target.value);\n  };\n\n  const handlePlaceChange = event => {\n    setPlace(event.target.value);\n  };\n\n  return (\n    <form className=\"search\" onSubmit={search}>\n      <a className=\"header\" href=\"/#\">\n        <h1>Google Yelp</h1>\n      </a>\n\n      <input\n        className=\"search-field\"\n        type=\"text\"\n        value={query}\n        placeholder=\"tacos, salons, bars\"\n        onKeyPress={handleQueryInput}\n        onChange={handleQueryChange}\n      />\n\n      <input\n        className=\"search-field\"\n        type=\"text\"\n        ref={inputRef}\n        value={place}\n        placeholder={placeHolder}\n        onChange={handlePlaceChange}\n      />\n\n      <button className=\"search-button\" type=\"submit\" />\n    </form>\n  );\n}\n\nexport default SearchBar;\n","import React from 'react';\n\nimport './Listing.sass';\n\nfunction Listing({ idx, place, handleHover }) {\n  let cost = '';\n  let open;\n  let addressArr = [];\n  let street;\n  let photoUrl;\n\n  let {\n    price_level,\n    opening_hours,\n    formatted_address,\n    photos,\n    name,\n    rating,\n    user_ratings_total\n  } = place;\n\n  for (let i = 0; i < price_level; i++) {\n    cost += '$';\n  }\n\n  if (opening_hours) open = opening_hours.open_now ? 'Open now' : 'Closed';\n\n  if (formatted_address) {\n    addressArr = formatted_address.split(',');\n    street = addressArr[0];\n  }\n\n  if (photos) {\n    photoUrl = photos[0].getUrl({ maxWidth: 250, maxHeight: 250 });\n  }\n\n  const onMouseEnter = () => {\n    handleHover(idx);\n  };\n\n  const onMouseLeave = () => {\n    handleHover(null);\n  };\n\n  return (\n    <div\n      className=\"listing\"\n      onMouseEnter={onMouseEnter}\n      onMouseLeave={onMouseLeave}\n    >\n      <div className=\"main-attr\">\n        <img src={photoUrl} alt=\"place\" />\n\n        <div className=\"name-price-rating\">\n          <h3 className=\"desc\">{`${idx + 1}. ` + name}</h3>\n          <div className=\"desc\">\n            {rating} Star{' '}\n            <span className=\"reviews\">{user_ratings_total} reviews</span>\n          </div>\n          <div className=\"desc\">{cost}</div>\n        </div>\n      </div>\n\n      <div className=\"sub-attr\">\n        <div className=\"address\">\n          <div className=\"street\">{street}</div>\n        </div>\n\n        <div className={`open ${opening_hours.open_now ? '' : 'closed'}`}>{open}</div>\n      </div>\n    </div>\n  );\n}\n\nexport default Listing;\n","import React from 'react';\n\nimport Listing from './Listing';\n\nimport './Listings.sass';\n\nfunction Listings({ listings, handleHover }) {\n  return (\n    <div className=\"index\">\n      <ul className=\"listings\">\n        {listings.map((place, idx) => (\n          <Listing\n            key={idx}\n            idx={idx}\n            place={place}\n            handleHover={handleHover}\n          />\n        ))}\n      </ul>\n    </div>\n  );\n}\n\nexport default Listings;\n","import React, { useRef, useState, useEffect } from 'react';\n\nimport useGoogleMap from './hooks/useGoogleMap';\nimport useGeocoder from './hooks/useGeocoder';\nimport usePlacesService from './hooks/usePlacesService';\n\nimport SearchBar from './search-bar/SearchBar';\nimport Listings from './listings/Listings';\n\nimport './App.sass';\n\n/* global google */\n\nconst mapOptions = {\n  center: { lat: 37.7749, lng: -122.4194 },\n  zoom: 12.5,\n  scrollwheel: false,\n  mapTypeControl: false,\n  zoomControl: true,\n  zoomControlOptions: {\n    position: google.maps.ControlPosition.LEFT_TOP\n  },\n  scaleControl: false,\n  streetViewControl: false\n};\n\nfunction App() {\n  const mapRef = useRef(null);\n  const [map, setLocations, setHoveredIdx] = useGoogleMap(mapRef, mapOptions);\n  const [geocoderReady, getCoordsOfAddress] = useGeocoder(map);\n  const [placesServiceReady, getLocationData] = usePlacesService(map);\n  const [listings, setListings] = useState([]);\n\n  useEffect(() => {\n    if (geocoderReady && placesServiceReady) {\n      // Default search params\n      handleSearch('tacos', 'San Francisco, CA, USA');\n    }\n  }, [geocoderReady, placesServiceReady]);\n\n  const handleSearch = async (query, place) => {\n    console.log('1. Params', query, place);\n\n    try {\n      const coords = await getCoordsOfAddress(place);\n      const data = await getLocationData(query, coords);\n\n      console.log('2. Data', data);\n\n      map.panTo(coords);\n\n      const locations = data.map(listing => listing.geometry.location);\n\n      setListings(data);\n      setLocations(locations);\n    } catch (err) {\n      console.log(err);\n    }\n  };\n\n  const handleHover = idx => {\n    setHoveredIdx(idx);\n  };\n\n  return (\n    <div className=\"App\">\n      <SearchBar handleSearch={handleSearch} />\n\n      <div className=\"results\">\n        <Listings listings={listings} handleHover={handleHover} />\n        <div className=\"google-map\" ref={mapRef} />\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport * as serviceWorker from './serviceWorker';\n\nimport App from './components/App';\nimport './index.sass';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}